<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Climate Control</title>
    <style>
        body {
            font-family: sans-serif;
            padding: 20px;
        }

        .section {
            margin-bottom: 20px;
        }

        input[type=range] {
            width: 100%;
        }

        .value {
            font-weight: bold;
        }

        button {
            padding: 10px;
            font-size: 16px;
            width: 100%;
        }
    </style>
</head>

<body>
    <h2>üå°Ô∏è Climate Control</h2>

    <div class="section">
        <p>–¢–µ–∫—É—â–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: <span id="temp">--</span> ¬∞C</p>
        <p>–í–ª–∞–∂–Ω–æ—Å—Ç—å: <span id="hum">--</span> %</p>
        <p>–ü–æ—Ä–æ–≥ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã: <span id="threshold">--</span> ¬∞C</p>
    </div>

    <div class="section">
        <label for="slider">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–æ–≤—ã–π –ø–æ—Ä–æ–≥: <span id="sliderVal">25</span> ¬∞C</label>
        <input type="range" id="slider" min="0" max="40" value="25">
    </div>

    <div class="section">
        <button onclick="saveThreshold()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        const tg = window.Telegram.WebApp;
        tg.expand(); // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω

        const slider = document.getElementById("slider");
        const sliderVal = document.getElementById("sliderVal");

        slider.addEventListener("input", () => {
            sliderVal.textContent = slider.value;
        });

        async function saveThreshold() {
            const newThreshold = parseFloat(slider.value);
            const initData = tg.initData;

            const response = await fetch("https://your-backend/render-endpoint/set-threshold", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    initData,
                    threshold: newThreshold
                })
            });

            if (response.ok) {
                tg.showAlert("‚úÖ –ü–æ—Ä–æ–≥ —Å–æ—Ö—Ä–∞–Ω—ë–Ω!");
            } else {
                tg.showAlert("‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è");
            }
        }

        // –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø–æ–∫–∞ backend –Ω–µ –ø–æ–¥–∫–ª—é—á—ë–Ω)
        document.getElementById("temp").textContent = "27.2";
        document.getElementById("hum").textContent = "49.8";
        document.getElementById("threshold").textContent = "25.0";
    </script>
</body>

</html>